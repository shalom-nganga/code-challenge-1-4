{"ast":null,"code":"var _jsxFileName = \"/home/shalom/superheroes/src/components/PowerEditForm.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PowerEditForm() {\n  _s();\n  const [{\n    data: power,\n    errors,\n    status\n  }, setPower] = useState({\n    data: null,\n    errors: [],\n    status: \"pending\"\n  });\n  const [description, setDescription] = useState(\"\");\n  const history = useNavigate();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    fetch(`/powers/${id}`).then(r => {\n      if (r.ok) {\n        r.json().then(power => {\n          setPower({\n            data: power,\n            errors: [],\n            status: \"resolved\"\n          });\n          setDescription(power.description);\n        });\n      } else {\n        r.json().then(err => setPower({\n          data: null,\n          errors: [err.error],\n          status: \"rejected\"\n        }));\n      }\n    });\n  }, [id]);\n  if (status === \"pending\") return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 36\n  }, this);\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetch(`/powers/${power.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        description\n      })\n    }).then(r => {\n      if (r.ok) {\n        history.push(`/powers/${power.id}`);\n      } else {\n        r.json().then(err => setPower({\n          data: power,\n          errors: err.errors,\n          status: \"rejected\"\n        }));\n      }\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Editing \", power.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"description\",\n      children: \"Description:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      id: \"description\",\n      name: \"description\",\n      rows: \"4\",\n      value: description,\n      onChange: e => setDescription(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), errors.length > 0 ? errors.map(err => /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: err\n    }, err, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Update Power\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(PowerEditForm, \"zwacqD7osiu8XaPPhEXdq7sdQyI=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = PowerEditForm;\nexport default PowerEditForm;\nvar _c;\n$RefreshReg$(_c, \"PowerEditForm\");","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","jsxDEV","_jsxDEV","PowerEditForm","_s","data","power","errors","status","setPower","description","setDescription","history","id","fetch","then","r","ok","json","err","error","children","fileName","_jsxFileName","lineNumber","columnNumber","handleSubmit","e","preventDefault","method","headers","body","JSON","stringify","push","onSubmit","name","htmlFor","rows","value","onChange","target","length","map","style","color","type","_c","$RefreshReg$"],"sources":["/home/shalom/superheroes/src/components/PowerEditForm.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\n\nfunction PowerEditForm() {\n  const [{ data: power, errors, status }, setPower] = useState({\n    data: null,\n    errors: [],\n    status: \"pending\",\n  });\n  const [description, setDescription] = useState(\"\");\n  const history = useNavigate();\n  const { id } = useParams();\n\n  useEffect(() => {\n    fetch(`/powers/${id}`).then((r) => {\n      if (r.ok) {\n        r.json().then((power) => {\n          setPower({ data: power, errors: [], status: \"resolved\" });\n          setDescription(power.description);\n        });\n      } else {\n        r.json().then((err) =>\n          setPower({ data: null, errors: [err.error], status: \"rejected\" })\n        );\n      }\n    });\n  }, [id]);\n\n  if (status === \"pending\") return <h1>Loading...</h1>;\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetch(`/powers/${power.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        description,\n      }),\n    }).then((r) => {\n      if (r.ok) {\n        history.push(`/powers/${power.id}`);\n      } else {\n        r.json().then((err) =>\n          setPower({ data: power, errors: err.errors, status: \"rejected\" })\n        );\n      }\n    });\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>Editing {power.name}</h2>\n      <label htmlFor=\"description\">Description:</label>\n      <textarea\n        id=\"description\"\n        name=\"description\"\n        rows=\"4\"\n        value={description}\n        onChange={(e) => setDescription(e.target.value)}\n      />\n      {errors.length > 0\n        ? errors.map((err) => (\n            <p key={err} style={{ color: \"red\" }}>\n              {err}\n            </p>\n          ))\n        : null}\n      <button type=\"submit\">Update Power</button>\n    </form>\n  );\n}\n\nexport default PowerEditForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}